// Data Configuration
const siteConfig = {
Â  Â  galleryItems: [
Â  Â  Â  Â { type: "image", src: "23.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "25.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "17.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "a.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "g.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "f.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "e.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "b.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "51.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "33.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "26.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "27.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "c.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "d.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "21.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "24.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "28.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "29.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "30.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "32.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "42.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "43.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "16.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "19.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "65.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "20.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "18.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "61.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "22.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "54.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "49.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "59.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "41.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "56.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "1.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "2.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "3.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "4.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "5.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "6.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "7.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "8.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "9.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "10.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "12.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "13.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "14.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "profile.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "45.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "46.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "47.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "48.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "50.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "52.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "53.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "55.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "57.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "58.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "60.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "62.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "63.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "64.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "66.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "31.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "35.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "36.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "38.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "39.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "40.jpg", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "video", src: "44.mp4", caption: "â¤ï¸" },
Â  Â  Â  Â  { type: "image", src: "11.jpg", caption: "â¤ï¸" },
Â  Â  ]
};

// DOM Elements
const loader = document.getElementById("loader");
const mainContent = document.getElementById("main-content");
const siteHeader = document.getElementById("site-header");
const galleryGrid = document.getElementById("gallery-grid");
const scrollBtn = document.getElementById("scroll-btn");
const musicBtn = document.getElementById("music-btn");
const bgMusic = document.getElementById("bg-music");
const musicIcon = musicBtn.querySelector(".music-icon");
const heroSection = document.getElementById("hero");

const lightbox = document.getElementById("lightbox");
const lightboxImg = document.getElementById("lightbox-img");
const lightboxVideo = document.getElementById("lightbox-video");
const lightboxCaption = document.getElementById("lightbox-caption");
const lightboxClose = document.getElementById("lightbox-close");
const prevBtn = document.getElementById("prev-btn");
const nextBtn = document.getElementById("next-btn");

let currentIndex = 0;
let lastScrollY = window.scrollY;

// --- Helper Functions ---
function getAssetPath(filename) {
Â  Â  // Removed the '/assets/' prefix
Â  Â  return `./${filename}`;
}

// --- Page & UI Logic ---
function hideLoader() {
Â  Â  loader.classList.add("hidden");
Â  Â  mainContent.style.display = "block";
}

function handleScroll() {
Â  Â  if (window.scrollY > lastScrollY && window.scrollY > 100) {
Â  Â  Â  Â  siteHeader.classList.add("hide");
Â  Â  } else {
Â  Â  Â  Â  siteHeader.classList.remove("hide");
Â  Â  }
Â  Â  lastScrollY = window.scrollY;
}

function toggleMusic() {
Â  Â  if (bgMusic.paused) {
Â  Â  Â  Â  bgMusic.play().catch(() => {});
Â  Â  Â  Â  musicBtn.classList.add("playing");
Â  Â  Â  Â  musicIcon.textContent = "ðŸ”Š";
Â  Â  Â  Â  localStorage.setItem("memory_playMusic", "true");
Â  Â  } else {
Â  Â  Â  Â  bgMusic.pause();
Â  Â  Â  Â  musicBtn.classList.remove("playing");
Â  Â  Â  Â  musicIcon.textContent = "ðŸŽµ";
Â  Â  Â  Â  localStorage.setItem("memory_playMusic", "false");
Â  Â  }
}

// --- Gallery & Lightbox Logic ---
function createGalleryItem(item, index) {
Â  Â  const itemEl = document.createElement("div");
Â  Â  itemEl.className = "gallery-item";
Â  Â  itemEl.setAttribute("tabindex", "0");

Â  Â  const mediaEl = document.createElement(item.type === "image" ? "img" : "video");
Â  Â  mediaEl.src = getAssetPath(item.src); // This will now use the modified getAssetPath
Â  Â  mediaEl.alt = item.caption;
Â  Â  mediaEl.loading = "lazy";
Â  Â  
Â  Â  if (item.type === "video") {
Â  Â  Â  Â  mediaEl.muted = true;
Â  Â  Â  Â  mediaEl.playsInline = true;
Â  Â  Â  Â  mediaEl.preload = "metadata";

Â  Â  Â  Â  const videoIndicator = document.createElement("span");
Â  Â  Â  Â  videoIndicator.className = "video-indicator";
Â  Â  Â  Â  videoIndicator.textContent = "VIDEO";
Â  Â  Â  Â  itemEl.appendChild(videoIndicator);
Â  Â  }

Â  Â  itemEl.appendChild(mediaEl);
Â  Â  
Â  Â  itemEl.addEventListener("click", () => {
Â  Â  Â  Â  currentIndex = index;
Â  Â  Â  Â  openLightbox(item);
Â  Â  });

Â  Â  return itemEl;
}

function loadGallery() {
Â  Â  siteConfig.galleryItems.forEach((item, index) => {
Â  Â  Â  Â  const galleryItem = createGalleryItem(item, index);
Â  Â  Â  Â  galleryGrid.appendChild(galleryItem);
Â  Â  });
}

function openLightbox(item) {
Â  Â  lightbox.classList.add("is-open");
Â  Â  lightbox.setAttribute("aria-hidden", "false");
Â  Â  document.body.style.overflow = "hidden";

Â  Â  if (item.type === "image") {
Â  Â  Â  Â  lightboxVideo.style.display = "none";
Â  Â  Â  Â  lightboxVideo.pause();
Â  Â  Â  Â  lightboxImg.style.display = "block";
Â  Â  Â  Â  lightboxImg.src = getAssetPath(item.src); // This will now use the modified getAssetPath
Â  Â  Â  Â  lightboxImg.alt = item.caption;
Â  Â  } else {
Â  Â  Â  Â  lightboxImg.style.display = "none";
Â  Â  Â  Â  lightboxVideo.style.display = "block";
Â  Â  Â  Â  lightboxVideo.src = getAssetPath(item.src); // This will now use the modified getAssetPath
Â  Â  Â  Â  lightboxVideo.play().catch(() => {});
Â  Â  }

Â  Â  lightboxCaption.textContent = item.caption;
}

function closeLightbox() {
Â  Â  lightbox.classList.remove("is-open");
Â  Â  lightbox.setAttribute("aria-hidden", "true");
Â  Â  document.body.style.overflow = "";
Â  Â  lightboxVideo.pause();
Â  Â  lightboxVideo.src = "";
Â  Â  lightboxImg.src = "";
Â  Â  lightboxCaption.textContent = "";
}

function navigateLightbox(direction) {
Â  Â  currentIndex = (currentIndex + direction + siteConfig.galleryItems.length) % siteConfig.galleryItems.length;
Â  Â  openLightbox(siteConfig.galleryItems[currentIndex]);
}

// --- Event Listeners ---
document.addEventListener("DOMContentLoaded", () => {
Â  Â  loadGallery();
Â  Â  
Â  Â  // Hide loader after a delay
Â  Â  setTimeout(hideLoader, 1000);

Â  Â  // Persist music state
Â  Â  if (localStorage.getItem("memory_playMusic") === "true") {
Â  Â  Â  Â  bgMusic.play().catch(() => {});
Â  Â  Â  Â  musicBtn.classList.add("playing");
Â  Â  Â  Â  musicIcon.textContent = "ðŸ”Š";
Â  Â  }
});

musicBtn.addEventListener("click", toggleMusic);

scrollBtn.addEventListener("click", () => {
Â  Â  document.getElementById("gallery").scrollIntoView({ behavior: "smooth" });
});

window.addEventListener("scroll", handleScroll);

// Lightbox event listeners
lightboxClose.addEventListener("click", closeLightbox);
prevBtn.addEventListener("click", () => navigateLightbox(-1));
nextBtn.addEventListener("click", () => navigateLightbox(1));
lightbox.addEventListener("click", (e) => {
Â  Â  if (e.target === lightbox || e.target.classList.contains("lightbox-stage")) {
Â  Â  Â  Â  closeLightbox();
Â  Â  }
});

document.addEventListener("keydown", (e) => {
Â  Â  if (!lightbox.classList.contains("is-open")) return;
Â  Â  if (e.key === "Escape") closeLightbox();
Â  Â  if (e.key === "ArrowLeft") navigateLightbox(-1);
Â  Â  if (e.key === "ArrowRight") navigateLightbox(1);
});
